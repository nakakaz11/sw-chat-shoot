// Generated by CoffeeScript 1.4.0
var canvas, coord, ctx, fixPosition, mousedown;

fixPosition = function(e, gCanvasElement) {
  var x, y;
  x = void 0;
  y = void 0;
  if (e.pageX || e.pageY) {
    x = e.pageX;
    y = e.pageY;
  } else {
    x = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;
    y = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;
  }
  x -= gCanvasElement.offsetLeft;
  y -= gCanvasElement.offsetTop;
  return {
    x: x,
    y: y
  };
};

canvas = document.getElementById("canvas");

coord = document.getElementById("coord");

ctx = canvas.getContext("2d");

/*
# draw image
imgCat = new Image()
imgCat.src = "backgroundThis.png"
# wait for image load
imgCat.onload = ->
  # draw imgCat on (0, 0)
  ctx.drawImage imgCat, 0, 0
*/


mousedown = false;

ctx.strokeStyle = "#00B7FF";

ctx.lineWidth = 5;

canvas.onmousedown = function(e) {
  var pos;
  pos = fixPosition(e, canvas);
  mousedown = true;
  ctx.beginPath();
  ctx.moveTo(pos.x, pos.y);
  return false;
};

canvas.onmousemove = function(e) {
  var pos;
  pos = fixPosition(e, canvas);
  coord.innerHTML = "(" + pos.x + "," + pos.y + ")";
  if (mousedown) {
    ctx.lineTo(pos.x, pos.y);
    return ctx.stroke();
  }
};

canvas.onmouseup = function(e) {
  return mousedown = false;
};
